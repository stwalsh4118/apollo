# [1-1] Go Project Scaffold, Config, and Logging

[Back to task list](./tasks.md)

## Description

Create the baseline Go backend structure and executable entrypoint for Apollo. Add environment-driven configuration with defaults from PRD section 15 and wire structured JSON logging so startup behavior is observable.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-18 09:15:55 | Created | N/A | Agreed | Task created from user request to implement PBI 1 | AI_Agent |
| 2026-02-18 09:15:55 | Status Change | Agreed | InProgress | Started implementation | AI_Agent |
| 2026-02-18 09:20:24 | Status Change | InProgress | Review | Implementation complete, internal AI review passed | AI_Agent |
| 2026-02-18 09:53:53 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

1. Create Go module and project layout using `cmd/apollo`, `internal/`, and `migrations/` directories.
2. Implement environment variable config loading with defaults from PRD section 15.
3. Provide a startup entrypoint that loads config and initializes structured JSON logging.
4. Ensure repeated literal values are defined as named constants.

## Implementation Plan

1. Create `api/go.mod` and initialize required package dependencies.
2. Build config package with env parsing helpers and typed config struct.
3. Build logging package using zerolog for consistent logger setup.
4. Build `cmd/apollo/main.go` that loads config, sets logger, and prepares application startup.
5. Add minimal `Makefile` quality commands used by subsequent tasks.

**External Packages**: This task requires research and a guide document for: `github.com/rs/zerolog`

## Test Plan

- `go test ./...` succeeds for scaffold packages.
- `go build ./cmd/apollo` succeeds.
- Running binary emits structured JSON logs.
- Config defaults and env overrides are validated by unit tests.

## Verification

- `make check` (in `api/`) passed (`go fmt`, `go vet`, `go test`).
- `go build ./cmd/apollo` (in `api/`) passed.
- `go run ./cmd/apollo` emitted structured JSON log output with expected startup fields.
- Internal AI review gate run and passed after scaffold/test fixes.

## Files Modified

- `docs/delivery/backlog.md`
- `docs/delivery/1/prd.md`
- `docs/delivery/1/tasks.md`
- `docs/delivery/1/1-1.md`
- `docs/delivery/1/1-1-zerolog-guide.md`
- `api/go.mod`
- `api/go.sum`
- `api/Makefile`
- `api/cmd/apollo/main.go`
- `api/internal/config/config.go`
- `api/internal/config/config_test.go`
- `api/internal/logging/logging.go`
- `api/internal/logging/logging_test.go`
- `api/migrations/.gitkeep`
