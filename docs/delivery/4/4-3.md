# [4-3] Progress API handlers

[Back to task list](./tasks.md)

## Description

Create HTTP handlers for the three progress API endpoints and wire them into the server router. Follows the existing handler pattern (handler struct with repository, RegisterRoutes method).

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-19 05:11:17 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. Create `ProgressHandler` in `api/internal/handler/progress.go`:
   - `GET /api/progress/topics/{id}` → calls `repo.GetTopicProgress(ctx, id)` → 200 with TopicProgress JSON
   - `PUT /api/progress/lessons/{id}` → parse `UpdateProgressInput` body → calls `repo.UpdateLessonProgress(ctx, id, input)` → 200 with updated LessonProgress JSON
   - `GET /api/progress/summary` → calls `repo.GetProgressSummary(ctx)` → 200 with ProgressSummary JSON
   - Error handling: 404 for not found, 400 for invalid JSON body, 500 for internal errors

2. Wire into `server.go`:
   - Create `ProgressRepository` and `ProgressHandler`
   - Call `progressHandler.RegisterRoutes(r)`

3. Follow existing handler patterns:
   - Use `chi.URLParam` for path parameters
   - Use `respond.JSON` and `respond.Error` helpers
   - Max 2MB body limit for PUT (consistent with write endpoints)

## Implementation Plan

1. Create `api/internal/handler/progress.go` with handler struct and route registration
2. Create `api/internal/handler/progress_test.go` with handler tests
3. Update `api/internal/server/server.go` to wire the new handler
4. Update `docs/api-specs/curriculum/curriculum-api.md` with progress endpoints

## Test Plan

- Test GET `/api/progress/topics/{id}` returns topic progress
- Test GET `/api/progress/topics/{id}` returns 404 for non-existent topic
- Test PUT `/api/progress/lessons/{id}` updates lesson progress
- Test PUT `/api/progress/lessons/{id}` returns 400 for invalid JSON
- Test PUT `/api/progress/lessons/{id}` returns 404 for non-existent lesson
- Test GET `/api/progress/summary` returns summary data

## Verification

_To be completed during implementation._

## Files Modified

- `api/internal/handler/progress.go` (new)
- `api/internal/handler/progress_test.go` (new)
- `api/internal/server/server.go`
- `docs/api-specs/curriculum/curriculum-api.md`
