# [3-6] Content section renderers — text, table, callout, image

[Back to task list](./tasks.md)

## Description

Implement the content section renderer pipeline and four of the six section type renderers: text (via react-markdown), table (HTML table from headers/rows), callout (styled box with 4 variants), and image (with caption). The content renderer reads the `content` JSON array from a lesson and dispatches each section to the appropriate renderer by `type`.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-18 13:34:02 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-18 13:59:35 | Status Change | Proposed | InProgress | Started implementation | AI_Agent |
| 2026-02-18 14:02:49 | Status Change | InProgress | Review | Implementation complete, internal AI review passed | AI_Agent |
| 2026-02-19 04:40:46 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

1. Content section dispatcher:
   - Reads `content.sections` array from lesson JSON
   - Renders each section by its `type` field
   - Unknown types render a fallback/placeholder
2. **Text renderer** (`type: "text"`):
   - Renders `body` field as Markdown via react-markdown
   - Supports headings, lists, bold/italic, links, inline code
3. **Table renderer** (`type: "table"`):
   - Renders `headers` and `rows` arrays as an HTML `<table>`
   - Styled with Tailwind (striped rows, bordered)
4. **Callout renderer** (`type: "callout"`):
   - Renders `body` in a styled box
   - 4 variants: `prerequisite`, `warning`, `tip`, `info` — each with distinct colour and icon
   - Optional `concept_ref` field (rendered as text for now, linked in PBI 4)
5. **Image renderer** (`type: "image"`):
   - Renders `<img>` from `url` with `alt` text
   - Displays `caption` below the image
6. Install `react-markdown` and `rehype-raw` for HTML-in-markdown support

## Implementation Plan

1. Install `react-markdown`, `rehype-raw`
2. Create `web/src/components/content/ContentRenderer.tsx` — dispatcher
3. Create `web/src/components/content/TextSection.tsx`
4. Create `web/src/components/content/TableSection.tsx`
5. Create `web/src/components/content/CalloutSection.tsx`
6. Create `web/src/components/content/ImageSection.tsx`
7. Create `web/src/components/content/UnknownSection.tsx` — fallback
8. Integrate `ContentRenderer` into `LessonContent` from task 3-5

**External Packages**: This task requires research and a guide document for: `react-markdown`

## Test Plan

- Text sections render Markdown correctly (headings, lists, code)
- Table sections render with correct headers and row data
- Callout boxes display correct colour/icon per variant (prerequisite, warning, tip, info)
- Image sections render `<img>` with alt text and caption
- Unknown section types render a fallback without crashing
- Content with mixed section types renders all correctly in sequence

## Verification

- TypeScript compilation passes
- ESLint passes
- Vite build succeeds
- ContentRenderer dispatches by section type with fallback
- TextSection renders markdown via react-markdown + rehype-raw with prose styling
- TableSection renders striped HTML table from headers/rows
- CalloutSection renders 4 styled variants with icons
- ImageSection renders img with alt and optional caption
- UnknownSection displays dashed fallback for unsupported types

## Files Modified

- `web/src/components/content/ContentRenderer.tsx` — Section type dispatcher
- `web/src/components/content/TextSection.tsx` — Markdown text renderer
- `web/src/components/content/TableSection.tsx` — Table renderer
- `web/src/components/content/CalloutSection.tsx` — Callout box with 4 variants
- `web/src/components/content/ImageSection.tsx` — Image with caption
- `web/src/components/content/UnknownSection.tsx` — Fallback for unknown types
- `web/src/components/LessonContent.tsx` — Integrated ContentRenderer
- `web/src/index.css` — Added @tailwindcss/typography plugin
- `docs/delivery/3/3-6-react-markdown-guide.md` — react-markdown guide
