# [3-5] Course view layout & module sidebar

[Back to task list](./tasks.md)

## Description

Build the course view at `/topics/:id`. Fetch the full topic tree using `useTopicFull()` and render a collapsible module sidebar on the left with the selected lesson's content area on the right. Clicking a lesson in the sidebar loads its full content via `useLessonDetail()`.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-18 13:34:02 | Created | N/A | Proposed | Task file created | AI_Agent |

## Requirements

1. Fetch full topic tree via `useTopicFull(id)`
2. Module sidebar:
   - Lists all modules with expand/collapse toggle
   - Each module shows its lessons as sub-items
   - Active lesson highlighted
   - Completion indicators (placeholder — wired in PBI 4)
3. Lesson content area:
   - Fetch lesson detail via `useLessonDetail(id)` when a lesson is selected
   - Display lesson title and estimated reading time
   - Content section rendering delegated to task 3-6+
4. Default selection: first lesson of first module on initial load
5. Responsive: sidebar collapses to a drawer/overlay on small screens
6. Loading and error states for both topic tree and lesson data

## Implementation Plan

1. Create `web/src/pages/CourseViewPage.tsx` — layout with sidebar + content
2. Create `web/src/components/ModuleSidebar.tsx` — collapsible module list
3. Create `web/src/components/ModuleItem.tsx` — single module with expand/collapse
4. Create `web/src/components/LessonItem.tsx` — clickable lesson entry
5. Create `web/src/components/LessonContent.tsx` — lesson content container (delegates to section renderers)
6. Manage selected lesson state (URL param or local state)
7. Implement responsive sidebar (hidden on mobile, toggle button to show as overlay)

## Test Plan

- Course view loads and renders sidebar with all modules
- Modules expand/collapse on click
- Clicking a lesson loads its content
- First lesson is selected by default
- Active lesson is visually highlighted in sidebar
- Loading state shows while lesson fetches
- Responsive: sidebar collapses on narrow viewport

## Verification

_To be completed during implementation._

## Files Modified

_To be completed during implementation._
