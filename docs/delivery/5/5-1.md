# 5-1: Curriculum JSON Schema

[Back to task list](./tasks.md)

## Description

Create the curriculum JSON Schema file at `schemas/curriculum.json` that defines the complete Topic structure from PRD section 7. This schema will be used with Claude Code's `--json-schema` flag to enforce structured output from research sessions, and by the Go validation package (task 5-4) to validate ingested curriculum data.

The schema must be compatible with JSON Schema draft 2020-12 (or draft-07 for maximum CLI compatibility) and must exactly match the curriculum structure defined in the PRD.

## Status History

| Timestamp | Event Type | From Status | To Status | Details | User |
|-----------|------------|-------------|-----------|---------|------|
| 2026-02-19 07:11:45 | Created | N/A | Proposed | Task file created | AI_Agent |
| 2026-02-19 07:21:18 | Status Change | Agreed | InProgress | Started implementation | AI_Agent |
| 2026-02-19 07:22:50 | Status Change | InProgress | Review | Implementation complete, internal AI review passed | AI_Agent |
| 2026-02-19 07:58:47 | Status Change | Review | Done | Task completed and verified | AI_Agent |

## Requirements

1. **Topic (top-level)**: All fields from PRD 7.1 — id, title, description, difficulty (enum: foundational/intermediate/advanced), estimated_hours, tags, prerequisites (with essential/helpful/deep_background classification), related_topics, modules, source_urls, generated_at, version
2. **Module**: All fields from PRD 7.2 — id, title, description, learning_objectives, estimated_minutes, order, lessons, assessment (with conceptual/practical question types)
3. **Lesson**: All fields from PRD 7.3 — id, title, order, estimated_minutes, content (sections array), concepts_taught, concepts_referenced, examples, exercises, review_questions
4. **Content section types**: All 6 types from PRD 7.4 — text (body), code (language, code, explanation, title?), callout (variant enum, body, concept_ref?), diagram (format enum, source, title), table (headers, rows), image (url, alt, caption)
5. **Exercise types**: All 7 types from PRD 6.2 — command, configuration, exploration, build, troubleshooting, scenario, thought_experiment. Each with title, instructions, success_criteria, hints, type, environment
6. **Concept**: id, name, definition, flashcard (front, back)
7. **Concept reference**: id, defined_in
8. **Prerequisite classification**: essential/helpful/deep_background arrays, each item with topic_id and reason
9. **Required fields enforced**: id, title for all entities; type for sections; definition for concepts
10. Schema file must be usable directly with `claude --json-schema schemas/curriculum.json`

## Implementation Plan

1. Create `schemas/` directory at project root
2. Write `schemas/curriculum.json` as a JSON Schema document
3. Use `$defs` for reusable sub-schemas (Module, Lesson, ContentSection, Exercise, Concept, etc.)
4. Ensure all enums match PRD values exactly
5. Add `required` constraints for mandatory fields
6. Validate the schema itself is valid JSON Schema (use a linter or online validator)

## Test Plan

- Schema file is valid JSON and parseable
- Schema validates the example curriculum JSON from PRD 7.3 (positive test)
- Schema rejects objects missing required `id` field (negative test)
- Schema rejects objects with invalid `difficulty` enum value (negative test)
- Schema rejects content sections with unknown `type` (negative test)
- Detailed positive/negative testing deferred to task 5-5

## Verification

- Schema is valid JSON and parseable: PASS
- All PRD fields covered (7.1-7.4, 6.2): PASS
- All 6 content section types with correct required/optional fields: PASS
- All 7 exercise types: PASS
- Prerequisite classification structure: PASS
- Concept/ConceptReference structure: PASS
- Required field enforcement: PASS
- Internal AI review: PASS (0 critical, 0 high, 0 medium, 5 low)

## Files Modified

- `schemas/curriculum.json` (new)
